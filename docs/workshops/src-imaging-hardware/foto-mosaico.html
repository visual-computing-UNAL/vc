<!DOCTYPE html><html><head><title>vc | Conversión de la imagen a un foto-mosaico por Hardware.</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/vc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/vc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-11"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-star" data-show-count="false" data-size="large" href="https://github.com/visualcomputing/vc/">Star</a><br><br><a class="watermark-0-0-10" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><h1 id="conversión-de-la-imagen-a-un-foto-mosaico-por-hardware" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Conversión de la imagen a un foto-mosaico por Hardware.</h1><blockquote><p><a href="/vc/docs/workshops/imaging-hardware">Volver</a></p></blockquote><h2 id="idea-general" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Idea general</h2><p>La idea basica se basa de 2 pasos principalmente, un preprocesamiento de las imagenes y la creacion de la imagen. </p><p>En el pre procesamiento lo que se hace es crear una nueva imagen larga que contiene todas las imagenes que van a representar los colores. </p><p>En el proceso de creacion de imagen se toma el color que le correspondia a cada pixel y se busca la pieza que tiene el color promedio mas cercano al color de ese pixel y posteriormente se dibuja la pieza (imagen) que contiene ese pixel.</p><h2 id="pre-procesamineto" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Pre procesamineto</h2><p>Lo primero que se hace es crear una imagen que se va encargar de tener todas las imagenes del tamaño de las piezas que va a estar creado el mosaico, para esto lo primero que se hace es que se cargan todas las imagenes y se hace un proceso muy parecido para la version sin hardware, se cargan todas las imagenes se calcula el valor promedio de cada imagen en caso de ser necesario y se guarda en un archivo esa informacion, pero a differencia de la version sin hardware ahora se crea una imagen que va a estar compuesta por todas las imagenes pero del tamaño de la pieza, es decir si la imagen era por ejemplo de tamaño 100x80 y el tamaño de la pieza del mosaico es de 10x10 entonces esa imagenes de 100x80 se reajusta a un tamaño de 10x10 y se agrega a la imagen que va a contener todas las imagenes, como se puede ver acontinuacion.</p><iframe id="imagesp5" class="p5-0-0-17 center" style="width: 100%; height: 80px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js></script>
            <script src=/vc/docs/sketches/imaging-hardware/foto-mosaico/imagesp5.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>Esto se hace ya que todos estos procesos son muy demorados pero independientes de la imagen que se va a representar en la imagen del mosaico, entonces se puede aprovechar ese hecho para hacer el pre calculo y luego poder utilizar esa informacion para crear diferentes mosaicos.</p><h2 id="creacion-del-mosaico" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Creacion del mosaico</h2><p>Para crear el mosaico la idea basica es cargar todas las imagenes, luego se re dimenciona la imagen para ajustarla a la resolucion que se desea y a la cual cada pixel se le va a cambiar por una pieza(imagen) de las calculadas en el pre procesamiento, para realizar el proceso de cargar la imagen se hace uso del archivo .frag en donde se aprovecha el hecho de que se puede realizar en paralelo ya que un  pixel siempre va a corresponder al mismo color y misma posicion de la imagen sin importar el orden en el que se haga siempre sera el mismo.</p><p>Despues haciendo uso de la funcion delta E se calcula la pieza que tiene un color promedio mas cercano al del pixel que va a representar haciendo uso de matematica se calcula la posicion del pixel en la imagen que se calculo en el pre procesamiento y se dibuja.</p><p>Para entender mejor como se calculan y dibujan las piezas hagamos un ejemplo. Supongamos que estamos dibujando el pixel en la posicion (10,12) con un tamaño de pieza de 8 y  que el color promedio corresponde a la imagen numero 13 en el listado de imagenes.</p><p>Entonces para calcular ese pixel sabemos que debe estar en la imagen 13 entonces multiplicamos 13 * tamaño de la pieza, en este caso 8, entonces tenemos 13 * 8 = 104.</p><p>ahora estamos ubicados en la posicion exacta donde empieza esta imagen en pixeles, pero la posicion del pixel que vamos a dibujar es (10,12) entonces esta desplazado un poco, para calcula ese desplazamiento sacamos modulo de la posicion de la pieza, en este caso (10 mod 8, 12 mod 8) = (2,4), ahora lo unico que nos falta es sumarle la coordenada x para quedar en la posicion exacta de la pieza, en este caso le sumariamos (2+13 * 8,4) = (106,4) y listo ahora ya tenemos la posicion del pixel que queremos dibujar, lo unico que faltaria es dibujarlo.</p><h2 id="imagen-final-del-mosaico-flamenco" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Imagen final del mosaico flamenco</h2><div class="tabs-0-0-18"><script id="mfELhjBtCv">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("mfELhjBtCv", "6jzvkXXQW/pnjrYP6mla2g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Result" data-tab-id="Result"><iframe id="mosaic_hardware" class="p5-0-0-17 center" style="width: 532px; height: 532px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js></script>
            <script src=/vc/docs/sketches/imaging-hardware/foto-mosaico/mosaic_hardware.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></div><div class="tab" data-tab-title="P5js" data-tab-id="P5js"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>mosaic_hardware.js</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="let grayShader;" id="code1-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> grayShader<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let shaderTexture;" id="code1-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> shaderTexture<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let img;" id="code1-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> img<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let smaller;" id="code1-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> smaller<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//imagen con todas las piezas" id="code1-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//imagen con todas las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let images;" id="code1-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> images<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//arreglo de las piezas" id="code1-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//arreglo de las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let colors_img = [];" id="code1-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> colors_img <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//arreglos con el color promedio de cada pieza" id="code1-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//arreglos con el color promedio de cada pieza</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let colors_avg_img = [];" id="code1-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> colors_avg_img <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let colors_avg_img2 = [];" id="code1-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> colors_avg_img2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//cantidad de piezas" id="code1-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//cantidad de piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let size_avg_img = 173;" id="code1-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> size_avg_img <span class="token operator">=</span> <span class="token number">173</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l17"><span class="lineCounter-0-0-4 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//tamaño de cada pieza" id="code1-l18"><span class="lineCounter-0-0-4 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//tamaño de cada pieza</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let scale_img = 15;" id="code1-l19"><span class="lineCounter-0-0-4 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> scale_img <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l20"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//pre procesamientos" id="code1-l21"><span class="lineCounter-0-0-4 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//pre procesamientos</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let create_img = false;" id="code1-l22"><span class="lineCounter-0-0-4 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> create_img <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let create_new_img = false;" id="code1-l23"><span class="lineCounter-0-0-4 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> create_new_img <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l24"><span class="lineCounter-0-0-4 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function preload() {" id="code1-l25"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  img = loadImage('/vc/docs/sketches/imaging-hardware/foto-mosaico/lenna.jpg');" id="code1-l26"><span class="lineCounter-0-0-4 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  img <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'/vc/docs/sketches/imaging-hardware/foto-mosaico/lenna.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  images = loadImage('/vc/docs/sketches/imaging-hardware/foto-mosaico/images.png')" id="code1-l27"><span class="lineCounter-0-0-4 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  images <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'/vc/docs/sketches/imaging-hardware/foto-mosaico/images.png'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  grayShader = loadShader('/vc/docs/sketches/imaging-hardware/foto-mosaico/mosaic_hardware.vert', '/vc/docs/> > sketches/imaging-hardware/foto-mosaico/mosaic_hardware.frag');" id="code1-l28"><span class="lineCounter-0-0-4 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  grayShader <span class="token operator">=</span> <span class="token function">loadShader</span><span class="token punctuation">(</span><span class="token string">'/vc/docs/sketches/imaging-hardware/foto-mosaico/mosaic_hardware.vert'</span><span class="token punctuation">,</span> <span class="token string">'/vc/docs/&gt; &gt; sketches/imaging-hardware/foto-mosaico/mosaic_hardware.frag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  preloadFilesColors();" id="code1-l29"><span class="lineCounter-0-0-4 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">preloadFilesColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  preloadAverageImg();" id="code1-l30"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">preloadAverageImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l31"><span class="lineCounter-0-0-4 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l32"><span class="lineCounter-0-0-4 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function preloadFilesColors(){" id="code1-l33"><span class="lineCounter-0-0-4 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">preloadFilesColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let dir_img = '/vc/docs/sketches/imaging/foto-mosaico/images/colors/'" id="code1-l34"><span class="lineCounter-0-0-4 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> dir_img <span class="token operator">=</span> <span class="token string">'/vc/docs/sketches/imaging/foto-mosaico/images/colors/'</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(let i=1;i<=size_avg_img;i++){" id="code1-l35"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>size_avg_img<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let curr_img = loadImage(dir_img+i+'.jpg');" id="code1-l36"><span class="lineCounter-0-0-4 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> curr_img <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>dir_img<span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        colors_img.push(curr_img);" id="code1-l37"><span class="lineCounter-0-0-4 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        colors_img<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curr_img<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l38"><span class="lineCounter-0-0-4 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l39"><span class="lineCounter-0-0-4 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l40"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function setup() {" id="code1-l41"><span class="lineCounter-0-0-4 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    createCanvas(512, 512, WEBGL);" id="code1-l42"><span class="lineCounter-0-0-4 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token constant">WEBGL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    shaderTexture = createGraphics(512, 512, WEBGL);" id="code1-l43"><span class="lineCounter-0-0-4 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    shaderTexture <span class="token operator">=</span> <span class="token function">createGraphics</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token constant">WEBGL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    shaderTexture.noStroke();" id="code1-l44"><span class="lineCounter-0-0-4 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    shaderTexture<span class="token punctuation">.</span><span class="token function">noStroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l45"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //pre procesamiento" id="code1-l46"><span class="lineCounter-0-0-4 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//pre procesamiento</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    if(create_new_img){" id="code1-l47"><span class="lineCounter-0-0-4 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span><span class="token punctuation">(</span>create_new_img<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        create_long_img();" id="code1-l48"><span class="lineCounter-0-0-4 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token function">create_long_img</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l49"><span class="lineCounter-0-0-4 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l50"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //pre procesamiento" id="code1-l51"><span class="lineCounter-0-0-4 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//pre procesamiento</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    if(create_img){" id="code1-l52"><span class="lineCounter-0-0-4 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">if</span><span class="token punctuation">(</span>create_img<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        createImagesAverageColor();" id="code1-l53"><span class="lineCounter-0-0-4 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token function">createImagesAverageColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l54"><span class="lineCounter-0-0-4 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    loadAvgImg();" id="code1-l55"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">loadAvgImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    noLoop();" id="code1-l56"><span class="lineCounter-0-0-4 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">noLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    create_colors_avg_img2();" id="code1-l57"><span class="lineCounter-0-0-4 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">create_colors_avg_img2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l58"><span class="lineCounter-0-0-4 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l59"><span class="lineCounter-0-0-4 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//Creamos todos los valores del color promedio en un arreglo, sin separalo para cada imagen" id="code1-l60"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Creamos todos los valores del color promedio en un arreglo, sin separalo para cada imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function create_colors_avg_img2(){" id="code1-l61"><span class="lineCounter-0-0-4 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">create_colors_avg_img2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(let curr of colors_avg_img){" id="code1-l62"><span class="lineCounter-0-0-4 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> curr <span class="token keyword">of</span> colors_avg_img<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        for(const temp of curr){" id="code1-l63"><span class="lineCounter-0-0-4 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> temp <span class="token keyword">of</span> curr<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            colors_avg_img2.push(float(temp-0));" id="code1-l64"><span class="lineCounter-0-0-4 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            colors_avg_img2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>temp<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        }" id="code1-l65"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l66"><span class="lineCounter-0-0-4 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l67"><span class="lineCounter-0-0-4 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l68"><span class="lineCounter-0-0-4 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//Se crea la imagen larga que va a tener todas las piezas " id="code1-l69"><span class="lineCounter-0-0-4 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Se crea la imagen larga que va a tener todas las piezas </span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function create_long_img(){" id="code1-l70"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">create_long_img</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let to_show = createImage(scale_img*colors_img.length,scale_img);" id="code1-l71"><span class="lineCounter-0-0-4 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> to_show <span class="token operator">=</span> <span class="token function">createImage</span><span class="token punctuation">(</span>scale_img<span class="token operator">*</span>colors_img<span class="token punctuation">.</span>length<span class="token punctuation">,</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(let i=0;i<colors_img.length;i++){" id="code1-l72"><span class="lineCounter-0-0-4 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>colors_img<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            let load_closer = colors_img[i];" id="code1-l73"><span class="lineCounter-0-0-4 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">let</span> load_closer <span class="token operator">=</span> colors_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            to_show.copy(load_closer,0,0,load_closer.width,load_closer.height,i*scale_img,0,scale_img,scale_img);" id="code1-l74"><span class="lineCounter-0-0-4 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            to_show<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>load_closer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>load_closer<span class="token punctuation">.</span>width<span class="token punctuation">,</span>load_closer<span class="token punctuation">.</span>height<span class="token punctuation">,</span>i<span class="token operator">*</span>scale_img<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>scale_img<span class="token punctuation">,</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l75"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    to_show.save('images','png')" id="code1-l76"><span class="lineCounter-0-0-4 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    to_show<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span><span class="token string">'png'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l77"><span class="lineCounter-0-0-4 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l78"><span class="lineCounter-0-0-4 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//pre procesamiento crear imagen con color promedio" id="code1-l79"><span class="lineCounter-0-0-4 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//pre procesamiento crear imagen con color promedio</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function createImagesAverageColor(){" id="code1-l80"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">createImagesAverageColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let img_vrg_col = [];" id="code1-l81"><span class="lineCounter-0-0-4 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> img_vrg_col <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(let im=0; im<colors_img.length; im++){" id="code1-l82"><span class="lineCounter-0-0-4 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> im<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> im<span class="token operator">&lt;</span>colors_img<span class="token punctuation">.</span>length<span class="token punctuation">;</span> im<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let curr_img = colors_img[im];" id="code1-l83"><span class="lineCounter-0-0-4 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> curr_img <span class="token operator">=</span> colors_img<span class="token punctuation">[</span>im<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let h = curr_img.height;" id="code1-l84"><span class="lineCounter-0-0-4 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> h <span class="token operator">=</span> curr_img<span class="token punctuation">.</span>height<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let w = curr_img.width;" id="code1-l85"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> w <span class="token operator">=</span> curr_img<span class="token punctuation">.</span>width<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l86"><span class="lineCounter-0-0-4 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let sum = [0,0,0];" id="code1-l87"><span class="lineCounter-0-0-4 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l88"><span class="lineCounter-0-0-4 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        print(h,w);" id="code1-l89"><span class="lineCounter-0-0-4 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token function">print</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l90"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        for(let i=0;i<w;i++){" id="code1-l91"><span class="lineCounter-0-0-4 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>w<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            for(let j=0;j<h;j++){" id="code1-l92"><span class="lineCounter-0-0-4 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>h<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="                let curr = curr_img.get(i,j);" id="code1-l93"><span class="lineCounter-0-0-4 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                <span class="token keyword">let</span> curr <span class="token operator">=</span> curr_img<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="                sum[0] += curr[0];" id="code1-l94"><span class="lineCounter-0-0-4 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> curr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="                sum[1] += curr[1];" id="code1-l95"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                sum<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> curr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="                sum[2] += curr[2];" id="code1-l96"><span class="lineCounter-0-0-4 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>                sum<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> curr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            }" id="code1-l97"><span class="lineCounter-0-0-4 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        }" id="code1-l98"><span class="lineCounter-0-0-4 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let total = w*h;" id="code1-l99"><span class="lineCounter-0-0-4 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> total <span class="token operator">=</span> w<span class="token operator">*</span>h<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let avrg = [Math.round(sum[0]/total),Math.round(sum[1]/total),Math.round(sum[2]/total)];" id="code1-l100"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> avrg <span class="token operator">=</span> <span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">/</span>total<span class="token punctuation">)</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>sum<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">/</span>total<span class="token punctuation">)</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>sum<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">/</span>total<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // print('sum',sum)" id="code1-l101"><span class="lineCounter-0-0-4 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// print('sum',sum)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // print('avrg',avrg)" id="code1-l102"><span class="lineCounter-0-0-4 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// print('avrg',avrg)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        img_vrg_col.push(avrg[0]+' '+avrg[1]+' '+avrg[2])" id="code1-l103"><span class="lineCounter-0-0-4 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        img_vrg_col<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>avrg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>avrg<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">' '</span><span class="token operator">+</span>avrg<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        print('img '+im+' was created')" id="code1-l104"><span class="lineCounter-0-0-4 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'img '</span><span class="token operator">+</span>im<span class="token operator">+</span><span class="token string">' was created'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l105"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    saveStrings(img_vrg_col,'img_vrg_col.txt')" id="code1-l106"><span class="lineCounter-0-0-4 -codedoc-line-counter">106<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">saveStrings</span><span class="token punctuation">(</span>img_vrg_col<span class="token punctuation">,</span><span class="token string">'img_vrg_col.txt'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l107"><span class="lineCounter-0-0-4 -codedoc-line-counter">107<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l108"><span class="lineCounter-0-0-4 -codedoc-line-counter">108<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//cargar informacion del color promedio de las imagenes en rgb" id="code1-l109"><span class="lineCounter-0-0-4 -codedoc-line-counter">109<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//cargar informacion del color promedio de las imagenes en rgb</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function preloadAverageImg(){" id="code1-l110"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">110<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">preloadAverageImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let dir_txt = '/vc/docs/sketches/imaging/foto-mosaico/images/img_vrg_col.txt'" id="code1-l111"><span class="lineCounter-0-0-4 -codedoc-line-counter">111<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> dir_txt <span class="token operator">=</span> <span class="token string">'/vc/docs/sketches/imaging/foto-mosaico/images/img_vrg_col.txt'</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    colors_avg_img = loadStrings(dir_txt);" id="code1-l112"><span class="lineCounter-0-0-4 -codedoc-line-counter">112<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    colors_avg_img <span class="token operator">=</span> <span class="token function">loadStrings</span><span class="token punctuation">(</span>dir_txt<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l113"><span class="lineCounter-0-0-4 -codedoc-line-counter">113<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l114"><span class="lineCounter-0-0-4 -codedoc-line-counter">114<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l115"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">115<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function loadAvgImg(){" id="code1-l116"><span class="lineCounter-0-0-4 -codedoc-line-counter">116<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">loadAvgImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //print(colors_avg_img,colors_avg_img.length)" id="code1-l117"><span class="lineCounter-0-0-4 -codedoc-line-counter">117<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//print(colors_avg_img,colors_avg_img.length)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(let i=0;i<colors_avg_img.length-1;i++){" id="code1-l118"><span class="lineCounter-0-0-4 -codedoc-line-counter">118<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>colors_avg_img<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let img = colors_avg_img[i];" id="code1-l119"><span class="lineCounter-0-0-4 -codedoc-line-counter">119<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> img <span class="token operator">=</span> colors_avg_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        colors_avg_img[i] = img.split(' ')" id="code1-l120"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">120<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        colors_avg_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l121"><span class="lineCounter-0-0-4 -codedoc-line-counter">121<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    colors_avg_img.pop();" id="code1-l122"><span class="lineCounter-0-0-4 -codedoc-line-counter">122<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    colors_avg_img<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l123"><span class="lineCounter-0-0-4 -codedoc-line-counter">123<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l124"><span class="lineCounter-0-0-4 -codedoc-line-counter">124<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function draw() {" id="code1-l125"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">125<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //en caso de que se quisiera reducir el tamaño de la imagen" id="code1-l126"><span class="lineCounter-0-0-4 -codedoc-line-counter">126<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//en caso de que se quisiera reducir el tamaño de la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let reduce = 1.0;" id="code1-l127"><span class="lineCounter-0-0-4 -codedoc-line-counter">127<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> reduce <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //nuevo tamaño de la imagen despues de reducirla y decidir cual va a hacer el tamaño de las piezas" id="code1-l128"><span class="lineCounter-0-0-4 -codedoc-line-counter">128<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//nuevo tamaño de la imagen despues de reducirla y decidir cual va a hacer el tamaño de las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let w = img.width/scale_img/reduce;" id="code1-l129"><span class="lineCounter-0-0-4 -codedoc-line-counter">129<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> w <span class="token operator">=</span> img<span class="token punctuation">.</span>width<span class="token operator">/</span>scale_img<span class="token operator">/</span>reduce<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    let h = img.height/scale_img/reduce;" id="code1-l130"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">130<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">let</span> h <span class="token operator">=</span> img<span class="token punctuation">.</span>height<span class="token operator">/</span>scale_img<span class="token operator">/</span>reduce<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l131"><span class="lineCounter-0-0-4 -codedoc-line-counter">131<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //imagen pequeña a la que se le van a remplazar los pixeles por piezas para crear el mosaico" id="code1-l132"><span class="lineCounter-0-0-4 -codedoc-line-counter">132<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//imagen pequeña a la que se le van a remplazar los pixeles por piezas para crear el mosaico</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    smaller = createImage(w,h,RGB);" id="code1-l133"><span class="lineCounter-0-0-4 -codedoc-line-counter">133<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    smaller <span class="token operator">=</span> <span class="token function">createImage</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">,</span><span class="token constant">RGB</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    smaller.copy(img,0,0,img.width,img.height,0,0,w,h);" id="code1-l134"><span class="lineCounter-0-0-4 -codedoc-line-counter">134<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    smaller<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>img<span class="token punctuation">.</span>width<span class="token punctuation">,</span>img<span class="token punctuation">.</span>height<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l135"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">135<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    smaller.loadPixels();" id="code1-l136"><span class="lineCounter-0-0-4 -codedoc-line-counter">136<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    smaller<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l137"><span class="lineCounter-0-0-4 -codedoc-line-counter">137<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    shaderTexture.shader(grayShader);" id="code1-l138"><span class="lineCounter-0-0-4 -codedoc-line-counter">138<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    shaderTexture<span class="token punctuation">.</span><span class="token function">shader</span><span class="token punctuation">(</span>grayShader<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    scale(1.0,-1.0);" id="code1-l139"><span class="lineCounter-0-0-4 -codedoc-line-counter">139<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //imagen pequeña a la que se le van a remplazar los pixeles por piezas para crear el mosaico" id="code1-l140"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">140<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//imagen pequeña a la que se le van a remplazar los pixeles por piezas para crear el mosaico</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('u_img', smaller);" id="code1-l141"><span class="lineCounter-0-0-4 -codedoc-line-counter">141<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'u_img'</span><span class="token punctuation">,</span> smaller<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('u_res_sm',[float(smaller.width),float(smaller.height)])" id="code1-l142"><span class="lineCounter-0-0-4 -codedoc-line-counter">142<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'u_res_sm'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">float</span><span class="token punctuation">(</span>smaller<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">float</span><span class="token punctuation">(</span>smaller<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //imagen que contiene todas las piezas" id="code1-l143"><span class="lineCounter-0-0-4 -codedoc-line-counter">143<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//imagen que contiene todas las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('images',images);" id="code1-l144"><span class="lineCounter-0-0-4 -codedoc-line-counter">144<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span>images<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //arreglo con el color promedio de cada pieza" id="code1-l145"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">145<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//arreglo con el color promedio de cada pieza</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('colors_avg_img',colors_avg_img2);" id="code1-l146"><span class="lineCounter-0-0-4 -codedoc-line-counter">146<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'colors_avg_img'</span><span class="token punctuation">,</span>colors_avg_img2<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //width y height de la imagen que contiene todas las piezas" id="code1-l147"><span class="lineCounter-0-0-4 -codedoc-line-counter">147<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//width y height de la imagen que contiene todas las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('images_resolution', [float(scale_img*colors_img.length),float(scale_img)]);" id="code1-l148"><span class="lineCounter-0-0-4 -codedoc-line-counter">148<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'images_resolution'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function">float</span><span class="token punctuation">(</span>scale_img<span class="token operator">*</span>colors_img<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">float</span><span class="token punctuation">(</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('u_resolution', [float(width),float(height)]);" id="code1-l149"><span class="lineCounter-0-0-4 -codedoc-line-counter">149<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'u_resolution'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function">float</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">float</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    grayShader.setUniform('scale_img', int(scale_img));" id="code1-l150"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">150<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    grayShader<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'scale_img'</span><span class="token punctuation">,</span> <span class="token function">int</span><span class="token punctuation">(</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l151"><span class="lineCounter-0-0-4 -codedoc-line-counter">151<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    texture(shaderTexture);" id="code1-l152"><span class="lineCounter-0-0-4 -codedoc-line-counter">152<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">texture</span><span class="token punctuation">(</span>shaderTexture<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    shaderTexture.rect(0,0,512,512);" id="code1-l153"><span class="lineCounter-0-0-4 -codedoc-line-counter">153<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    shaderTexture<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    rect(-256,-256,512,512);" id="code1-l154"><span class="lineCounter-0-0-4 -codedoc-line-counter">154<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">rect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l155"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">155<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //imagen para pequeña para tomar de referencia" id="code1-l156"><span class="lineCounter-0-0-4 -codedoc-line-counter">156<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//imagen para pequeña para tomar de referencia</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    temp = createImage(w*3,h*3,RGB);" id="code1-l157"><span class="lineCounter-0-0-4 -codedoc-line-counter">157<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    temp <span class="token operator">=</span> <span class="token function">createImage</span><span class="token punctuation">(</span>w<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span>h<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token constant">RGB</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    temp.copy(img,0,0,img.width,img.height,0,0,w*3,h*3);" id="code1-l158"><span class="lineCounter-0-0-4 -codedoc-line-counter">158<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    temp<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>img<span class="token punctuation">.</span>width<span class="token punctuation">,</span>img<span class="token punctuation">.</span>height<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span>h<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    temp.loadPixels();" id="code1-l159"><span class="lineCounter-0-0-4 -codedoc-line-counter">159<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    temp<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l160"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">160<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    scale(1.0,-1.0);" id="code1-l161"><span class="lineCounter-0-0-4 -codedoc-line-counter">161<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    image(temp,-256,-256);" id="code1-l162"><span class="lineCounter-0-0-4 -codedoc-line-counter">162<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">image</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l163"><span class="lineCounter-0-0-4 -codedoc-line-counter">163<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    noLoop();" id="code1-l164"><span class="lineCounter-0-0-4 -codedoc-line-counter">164<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">noLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    print('END')" id="code1-l165"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">165<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'END'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l166"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">166<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div><div class="tab" data-tab-title=".vert" data-tab-id=".vert"><pre class="with-bar"><code class="glsl -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>mosaic_hardware.vert</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="#ifdef GL_ES" id="code2-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_ES</span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="precision mediump float;" id="code2-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="#endif" id="code2-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="attribute vec3 aPosition;" id="code2-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">attribute</span> <span class="token keyword">vec3</span> aPosition<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="attribute vec2 aTexCoord;" id="code2-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">attribute</span> <span class="token keyword">vec2</span> aTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="varying vec2 vTexCoord;" id="code2-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">varying</span> <span class="token keyword">vec2</span> vTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="void main() {" id="code2-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  vTexCoord = aTexCoord;" id="code2-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  vTexCoord <span class="token operator">=</span> aTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  vec4 positionVec4 = vec4(aPosition, 1.0);" id="code2-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">vec4</span> positionVec4 <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>aPosition<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  positionVec4.xy = positionVec4.xy * 2.0 - 1.0;" id="code2-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  positionVec4<span class="token punctuation">.</span>xy <span class="token operator">=</span> positionVec4<span class="token punctuation">.</span>xy <span class="token operator">*</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  gl_Position = positionVec4;" id="code2-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  gl_Position <span class="token operator">=</span> positionVec4<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code2-l17"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div><div class="tab" data-tab-title=".frag" data-tab-id=".frag"><pre class="with-bar"><code class="glsl -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>mosaic_hardware.frag</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="#ifdef GL_ES" id="code3-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_ES</span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="precision mediump float;" id="code3-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="#endif" id="code3-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform sampler2D u_img;" id="code3-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_img<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform sampler2D images;" id="code3-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> images<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform sampler2D smaller;" id="code3-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> smaller<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform vec2 u_resolution;" id="code3-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_resolution<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform vec2 u_res_sm;" id="code3-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_res_sm<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform vec2 images_resolution;" id="code3-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> images_resolution<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform vec3 colors_avg_img[173];" id="code3-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec3</span> colors_avg_img<span class="token punctuation">[</span><span class="token number">173</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="uniform int scale_img;" id="code3-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">int</span> scale_img<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l17"><span class="lineCounter-0-0-4 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="float divisions = 1.0;" id="code3-l18"><span class="lineCounter-0-0-4 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">float</span> divisions <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l19"><span class="lineCounter-0-0-4 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//valor entre 0-1 que representa la posicion del pixel en la imange que contiene todas las piezas" id="code3-l20"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//valor entre 0-1 que representa la posicion del pixel en la imange que contiene todas las piezas</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="vec2 pos_images(int pos,vec2 original){" id="code3-l21"><span class="lineCounter-0-0-4 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec2</span> <span class="token function">pos_images</span><span class="token punctuation">(</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">vec2</span> original<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //calculo explicado en el articulo" id="code3-l22"><span class="lineCounter-0-0-4 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//calculo explicado en el articulo</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    vec2 pos_pix = vec2(float(pos*scale_img)+mod(float(original.x),float(scale_img)),mod(float(original.y),float> > (scale_img)));" id="code3-l23"><span class="lineCounter-0-0-4 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">vec2</span> pos_pix <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">(</span>pos<span class="token operator">*</span>scale_img<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token punctuation">(</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    return pos_pix/images_resolution;" id="code3-l24"><span class="lineCounter-0-0-4 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> pos_pix<span class="token operator">/</span>images_resolution<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code3-l25"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l26"><span class="lineCounter-0-0-4 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="float deltaE(vec3 col1,vec3 col2){" id="code3-l27"><span class="lineCounter-0-0-4 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">float</span> <span class="token function">deltaE</span><span class="token punctuation">(</span><span class="token keyword">vec3</span> col1<span class="token punctuation">,</span><span class="token keyword">vec3</span> col2<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    float acum = 0.0;" id="code3-l28"><span class="lineCounter-0-0-4 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">float</span> acum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(int i=0;i<3;i++){" id="code3-l29"><span class="lineCounter-0-0-4 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        float temp = float(col1[i] - col2[i]);" id="code3-l30"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">float</span> temp <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>col1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> col2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        acum += temp*temp;" id="code3-l31"><span class="lineCounter-0-0-4 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        acum <span class="token operator">+=</span> temp<span class="token operator">*</span>temp<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code3-l32"><span class="lineCounter-0-0-4 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    return acum;//sqrt(acum)" id="code3-l33"><span class="lineCounter-0-0-4 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> acum<span class="token punctuation">;</span><span class="token comment">//sqrt(acum)</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code3-l34"><span class="lineCounter-0-0-4 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l35"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//Se encuentra la pieza que tiene el color mas cercano utilizando la funcion delta E" id="code3-l36"><span class="lineCounter-0-0-4 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Se encuentra la pieza que tiene el color mas cercano utilizando la funcion delta E</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="int loadImageCloser(vec3 col){" id="code3-l37"><span class="lineCounter-0-0-4 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">int</span> <span class="token function">loadImageCloser</span><span class="token punctuation">(</span><span class="token keyword">vec3</span> col<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    float min = 1e8;" id="code3-l38"><span class="lineCounter-0-0-4 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">float</span> min <span class="token operator">=</span> <span class="token number">1e8</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    int pos = -1;" id="code3-l39"><span class="lineCounter-0-0-4 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for(int i=0;i<173;i++){" id="code3-l40"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">173</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        float de = deltaE(col*255.0,colors_avg_img[i]);" id="code3-l41"><span class="lineCounter-0-0-4 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">float</span> de <span class="token operator">=</span> <span class="token function">deltaE</span><span class="token punctuation">(</span>col<span class="token operator">*</span><span class="token number">255.0</span><span class="token punctuation">,</span>colors_avg_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        if(min>de){" id="code3-l42"><span class="lineCounter-0-0-4 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">if</span><span class="token punctuation">(</span>min<span class="token operator">&gt;</span>de<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            min = de;" id="code3-l43"><span class="lineCounter-0-0-4 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            min <span class="token operator">=</span> de<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="            pos = i;" id="code3-l44"><span class="lineCounter-0-0-4 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>            pos <span class="token operator">=</span> i<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        }" id="code3-l45"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code3-l46"><span class="lineCounter-0-0-4 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    return pos;" id="code3-l47"><span class="lineCounter-0-0-4 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> pos<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code3-l48"><span class="lineCounter-0-0-4 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l49"><span class="lineCounter-0-0-4 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="vec4 get_px(int pos,vec2 original){" id="code3-l50"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec4</span> <span class="token function">get_px</span><span class="token punctuation">(</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">vec2</span> original<span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    return vec4(texture2D(images,pos_images(pos,original)).rgb, 1);//calculo del color correspondiente, nos e usa > > transparencia" id="code3-l51"><span class="lineCounter-0-0-4 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">return</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token function">texture2D</span><span class="token punctuation">(</span>images<span class="token punctuation">,</span><span class="token function">pos_images</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span>original<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//calculo del color correspondiente, nos e usa &gt; &gt; transparencia</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code3-l52"><span class="lineCounter-0-0-4 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l53"><span class="lineCounter-0-0-4 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="void main() {" id="code3-l54"><span class="lineCounter-0-0-4 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    vec2 cord = vec2(int(gl_FragCoord.x)/scale_img,int(gl_FragCoord.y)/scale_img);//posicion a la que corresponde > > en la imagen pequeña" id="code3-l55"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">vec2</span> cord <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span>gl_FragCoord<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">/</span>scale_img<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">(</span>gl_FragCoord<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">/</span>scale_img<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//posicion a la que corresponde &gt; &gt; en la imagen pequeña</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    vec2 position = cord/u_res_sm;//Valor entre 0 y 1" id="code3-l56"><span class="lineCounter-0-0-4 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">vec2</span> position <span class="token operator">=</span> cord<span class="token operator">/</span>u_res_sm<span class="token punctuation">;</span><span class="token comment">//Valor entre 0 y 1</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    vec4 texel = texture2D(u_img,position);//color en la imagen pequeña " id="code3-l57"><span class="lineCounter-0-0-4 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">vec4</span> texel <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_img<span class="token punctuation">,</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//color en la imagen pequeña </span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    vec3 rgb_val = vec3(texel[0],texel[1],texel[2]);" id="code3-l58"><span class="lineCounter-0-0-4 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">vec3</span> rgb_val <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span>texel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>texel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>texel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    int pxcol = loadImageCloser(rgb_val);//posicion de la pieza a la que corresponde" id="code3-l59"><span class="lineCounter-0-0-4 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">int</span> pxcol <span class="token operator">=</span> <span class="token function">loadImageCloser</span><span class="token punctuation">(</span>rgb_val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//posicion de la pieza a la que corresponde</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l60"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    gl_FragColor = get_px(pxcol,gl_FragCoord.xy);//color del pixel en la piza correspondiente" id="code3-l61"><span class="lineCounter-0-0-4 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    gl_FragColor <span class="token operator">=</span> <span class="token function">get_px</span><span class="token punctuation">(</span>pxcol<span class="token punctuation">,</span>gl_FragCoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//color del pixel en la piza correspondiente</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code3-l62"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div></div><h2 id="imagen-mas-grande" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Imagen mas grande</h2><iframe id="mosaic_hardware_big" class="p5-0-0-17 center" style="width: 788px; height: 788px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js></script>
            <script src=/vc/docs/sketches/imaging-hardware/foto-mosaico/mosaic_hardware_big.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><div class="contentnav-0-0-16" data-no-search=""><a href="#conversión-de-la-imagen-a-un-foto-mosaico-por-hardware" class="h1" data-content-highlight="conversión-de-la-imagen-a-un-foto-mosaico-por-hardware">Conversión de la imagen a un foto-mosaico por Hardware.</a><a href="#idea-general" class="h2" data-content-highlight="idea-general">Idea general</a><a href="#pre-procesamineto" class="h2" data-content-highlight="pre-procesamineto">Pre procesamineto</a><a href="#creacion-del-mosaico" class="h2" data-content-highlight="creacion-del-mosaico">Creacion del mosaico</a><a href="#imagen-final-del-mosaico-flamenco" class="h2" data-content-highlight="imagen-final-del-mosaico-flamenco">Imagen final del mosaico flamenco</a><a href="#imagen-mas-grande" class="h2" data-content-highlight="imagen-mas-grande">Imagen mas grande</a></div></div><div id="-codedoc-toc" class="toc-0-0-13"><div class="content-0-0-14"><p><a href="/vc/">Home</a></p><div class="collapse-0-0-9 "><script id="UCJIURASrY">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("UCJIURASrY", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Workshops</span><span class="icon-font closed">chevron_right</span></div><div class="content"><div class="collapse-0-0-9 "><script id="KEpgUXLTjB">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("KEpgUXLTjB", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Imaging &amp; Video</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/imaging">Problem Statement and Background</a>
<a href="/vc/docs/workshops/imaging-software">Imaging &amp; Video - Software</a>
<a href="/vc/docs/workshops/imaging-hardware">Imaging &amp; Video - Hardware</a></p></div></div><div class="collapse-0-0-9 "><script id="DJcWJYGCEX">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("DJcWJYGCEX", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Rendering</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/rendering">Problem Statement and Background</a>
<a href="/vc/docs/workshops/ray-tracing">Ray Tracing</a></p></div></div><p><a href="/vc/docs/workshops/algovis">Algovis</a>
<a href="/vc/docs/workshops/cg">Computer Graphics</a>
<a href="/vc/docs/workshops/hci">HCI</a></p></div></div><div class="collapse-0-0-9 "><script id="AmzjEPpryA">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("AmzjEPpryA", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">P5 Code Snippets</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/snippets/component">P5 Component</a>
<a href="/vc/docs/snippets/basic">Basics</a>
<a href="/vc/docs/snippets/video-dom">Video on dom</a>
<a href="/vc/docs/snippets/video-canvas">Video on canvas</a>
<a href="/vc/docs/snippets/3d">3D</a>
<a href="/vc/docs/snippets/lib">Libs</a>
<a href="/vc/docs/snippets/sound">Sound</a></p></div></div><div class="collapse-0-0-9 "><script id="PTiqIzKfqk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("PTiqIzKfqk", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Team</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/team/acastillos">acastillos</a>
<a href="/vc/docs/team/sapinedave">sapinedave</a>
<a href="/vc/docs/team/jestupinanb">jestupinanb</a>
<a href="/vc/docs/team/jpbetancourtma">jpbetancourtma</a></p></div></div></div><div class="search-0-0-15"><script id="pXLLNuMvHg">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pXLLNuMvHg", "MChpnTvN8BpuKyiMGzmSYw==", {"repo":"vc","user":"visualcomputing","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><div class="footer-0-0-12"><div class="left"><script id="oFxpIDucfl">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("oFxpIDucfl", "X5W7He+ge/Kg3B6xB+T5gg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"><a href="https://github.com/visualcomputing/vc/" target="_blank">GitHub</a></div></div><div class="right"><script id="jWugnknLoJ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("jWugnknLoJ", "3ehN2Qj7wHC4donAKEDe0Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="rDiwWjtluK">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("rDiwWjtluK", "bIAidu6MCPVPBcGGWLCR6Q==", {"namespace":"/vc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>