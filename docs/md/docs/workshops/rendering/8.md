Una imagen rasterizada está hecha de píxeles. Una forma de producir una imagen de una escena 3D es "deslizar" de alguna manera esta imagen ráster a lo largo del plano de la imagen de nuestra cámara virtual y disparar rayos a través de cada píxel de la imagen, para encontrar qué parte de la escena cubre cada píxel. La forma en que lo hacemos es simplemente proyectando un rayo que se origina en la posición de la cámara y pasa por el centro de cada píxel. Luego encontramos con que objetos de la escena se cruzan los rayos. Si un pixel "ve" algo, seguramente ve el objeto que está justo frente a él en la dirección señalada por ese rayo. La dirección del rayo, como acabamos de mencionar, se puede construir simplemente trazando una línea desde el origen de la cámara hasta el centro del píxel y luego extendiendo esa línea en la escena.

Ahora que sabemos lo que ve un pixel, todo lo que tenemos que hacer es repetir este proceso para cada píxel de la imagen. Al configurar el color del píxel con el color del objeto en el que se cruza cada rayo que pasa por el centro de cada píxel, podemos formar una imagen de la escena vista desde un punto de vista particular. Hay que tener en cuenta que este método requiere recorrer todos los píxeles de la imagen y proyectar un rayo en la escena para cada uno de estos píxeles. El segundo paso, el paso de intersección, requiere recorrer todos los objetos en la escena para probar si un rayo se cruza con alguno de estos objetos. Aquí hay una implementación de esta técnica en pseudocódigo:

<div style="text-align:center">
<img src="https://i.gyazo.com/1131847a861bbdb839c9e90aa946da53.png"
     alt="Markdown Monster icon"
     style="width: 100hv;margin-bottom: 1s0px"
     />
</div>

Se suele decir que el trazado de rayos es mejor que la rasterización para el sombreado, pero la mayoría de los libros de texto no explican por qué. Gran parte en el renderizado se trata de calcular la visibilidad entre un punto en el espacio y la primera superficie visible en una dirección determinada, o la visibilidad entre dos puntos. El primero se usa para resolver el problema de visibilidad, el segundo para resolver cosas como el sombreado. La rasterización (combinada con el algoritmo de búfer de profundidad) es muy buena para encontrar la primera superficie visible, pero es ineficaz para resolver la visibilidad entre dos puntos. El trazado de rayos en el otro extremo puede manejar ambos casos de manera eficiente. Encontrar la primera superficie visible es útil para resolver el problema de visibilidad. Por lo tanto, tanto el trazado de rayos como la rasterización hacen un buen trabajo en eso. El sombreado, por otro lado, requiere resolver la visibilidad entre superficies. Se utiliza para calcular sombras, sombras suaves cuando se utilizan luces de área y, en general, efectos de iluminación global como reflexión, refracción, reflejos indirectos y difusa indirecta. Para esta parte particular del proceso de renderizado, el trazado de rayos es más eficiente que la rasterización. Pero tenga en cuenta que cualquier técnica que calcule la visibilidad entre puntos puede usarse para sombrear y resolver el problema de visibilidad. No tiene que ser ni trazado de rayos ni rasterización, pero el trazado de rayos es de alguna manera la forma perezosa de hacerlo, aunque tiene un precio, el costo computacional.

El trazado de rayos suena como un método mucho mejor que la rasterización cuando se mira de esa manera, aunque el problema principal con el trazado de rayos es que implica calcular la intersección de rayos con geometría, que es una operación costosa. En las aplicaciones de gráficos en tiempo real, la velocidad es más importante que el realismo fotográfico, razón por la cual las GPU utilizan la rasterización. Cuando el fotorrealismo es más importante que la velocidad, el trazado de rayos es una opción mucho mejor, aunque es más difícil producir imágenes con trazado de rayos a velocidades de cuadro interactivas y menos aún a velocidades de cuadro en tiempo real.
En resumen, el uso del trazado de rayos para calcular imágenes fotorrealistas de objetos 3D se puede descomponer esencialmente en tres pasos:

* **Proyección de rayos:** proyecta un rayo para cada píxel de la imagen.
* **Intersección Ray-Geometría:** prueba si un rayo se cruza con alguno de los objetos en la escena (esto requiere hacer un bucle sobre todos los objetos para cada rayo emitido).
* **Sombreado:** averigua cómo se ve el punto de intersección entre el rayo y el objeto (si se ha producido una intersección).